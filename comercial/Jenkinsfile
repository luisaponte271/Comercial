#!groovy?  
jboss-prod-host = 'localhost' 
jboss-prod-admin-user = admin
jboss-prod-admin-password = admin
aplicacion-compiler = comercial.war

node {
  
	   stage('Descargar Fuentes') { 
		  checkout scm
	   }     
	  
	   stage('Compilando con Maven')
	   {
	   
	   dir('comercial') {
			bat "mvn clean package -DskipTests"
		}
	      
		println("compilado")
	   }

	   stage('Deployment en JBOSS') {	
	   dir('target') {
		//bat "MOVE comercial.war ${JBOOS-SERVIDOR}"
			
		def jboss-undeploy = "java -jar jboss-cli-client.jar --connect --controller=localhost:9990 --user=admin --password=admin --command='undeploy comercial.war'"
		bat jboss-undeploy                            
						
		def jboss-deploy = "java -jar jboss-cli-client.jar --connect --controller=localhost:9990 --user=admin --password=admin --command='deploy ../../standalone/deployments/comercial.war --force'"
		bat jboss-deploy   
		 
		  
	   } 
	     
	   println("deplegado")
		 
	}
}
