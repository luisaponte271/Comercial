#!groovy?  
def jboss-prod-host = 'localhost:9990' 
def jboss-prod-admin-user = 'admin'
def jboss-prod-admin-password = 'admin'
def aplicacion-compiler = 'comercial.war'

node {
  
	   stage('Descargar Fuentes') { 
		  checkout scm
	   }     
	  
	   stage('Compilando con Maven')
	   {
	   
	   dir('comercial') {
			bat "mvn clean package -DskipTests"
		}
	      
		println("compilado")
	   }

	   stage('Deployment en JBOSS') {	
	    dir('target') {
	    println("actual path")
		bat "chdir"
		/*
		def jboss-undeploy = "java -jar jboss-cli-client.jar --connect --controller=${jboss-prod-host} --user=${jboss-prod-admin-user} --password=${jboss-prod-admin-password} --command='undeploy comercial.war'"
		bat jboss-undeploy                            
						
		def jboss-deploy = "java -jar jboss-cli-client.jar --connect --controller=${jboss-prod-host} --user=${jboss-prod-admin-user} --password=${jboss-prod-admin-password} --command='deploy ../../standalone/deployments/comercial.war --force'"
		bat jboss-deploy   
		 */
		  
	   } 
	     
	   println("deplegado")
		 
	}
}
